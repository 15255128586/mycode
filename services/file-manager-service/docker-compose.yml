services:
  file-manager-service:
    build: .
    ports:
      - "9300:9300"
    environment:
      - MINIO_ENDPOINT=${MINIO_ENDPOINT:-http://host.docker.internal:9200}
      - MINIO_ACCESS_KEY=${MINIO_ACCESS_KEY:-minioadmin}
      - MINIO_SECRET_KEY=${MINIO_SECRET_KEY:-minioadmin}
      - MINIO_BUCKET=${MINIO_BUCKET:-documents}
      - PUBLIC_BASE_URL=${PUBLIC_BASE_URL:-http://host.docker.internal:9300}
      - DOCSERVER_URL=${DOCSERVER_URL:-http://127.0.0.1:8082}
    volumes:
      - ./app:/app/app
    extra_hosts:
      - "host.docker.internal:host-gateway"
    command: ["uvicorn", "app.main:app", "--host", "0.0.0.0", "--port", "9300", "--reload"]
